.. _topics-Overview:

概述
=============================

简介
-----------------------------

CNStream是面向寒武纪开发平台的数据流处理SDK。用户可
以根据CNStream提供的API，开发实现自己的组件。还可以通过组件之间的互连，灵活地实现自己的需求。CNStream能够大大简化寒武纪深度学习平台提供的推理能力
和其他处理（如视频解码、神经⽹络图像前处理）的集成，也能够在兼顾灵活性的同时，充分发挥
寒武纪MLU（Machine Learning Unit 机器学习处理器）的硬件解码和机器学习算法运算的性能。

CNStream基于模块化和流水线的思想，提供了一套C++语言的API。支持流处理多路并发的Pipeline框架。为用户提供可自定义的插件机制、模块间数据传输的高度抽象的DataFrame类型，满足用户对性能和可伸缩性的需求。

CNStream特点
-----------------------------
CNStream定位于构建一整套寒武纪硬件平台上的实时数据流分析框架，框架具有多个基于寒武纪思元处理器的硬件加速模块，可将深层神经网络和其他复杂处理任务带入流处理管道。开发者只需专注于构建核心深度学习网络和IP，然后用寒武纪特定模型转换器生成寒武纪平台能执行的模型，而不是从头开始设计端到端的解决方案。

CNStream具有以下几个特点:

* 简单易用的插件化设计,内置插件及正在扩充的插件库可以让用户快速构建自己的业务应用，而不用关心实现细节。

* 高效的流水线设计，区别于Gstreamer等框架庞大的结构及传统的视频处理流水线结构，CNStream设计了一套架构伸缩灵活的流水线框架，每一个模块的并行度及队列深度可以根据时延要求及数据吞吐量而定制，根据业务需求，通过Json配置文件就可以很方便地进行调整。

* 丰富的原生插件，为提高推理效率，根据寒武纪神经网络推理芯片设计特点，内置了从数据源解码，前后处理及推理，追踪等插件，其中推理插件、前后处理、编/解码插件、追踪插件充分利用了寒武纪芯片设计特点和内部IP核心间DMA的能力,使用后极大的提高了系统整体吞吐效率。

* 支持分布式架构，内置kafka消息模块，可以帮助客户快速接入分布式系统。

* 支持常见分类以及常规目标检测神经网络，比如：Yolo，SSD,RESNET,VGG等，高效支持低位宽(INT8)和稀疏权值运算，并提供了部分网络使

* 配置式生成Pipeline的模式，使整个框架具备图形化拖拽生成Pipeline的能力，可以非常短的时间内让用户体验寒武纪视数据流分析框架。

* 灵活布署，使用标准C++11开发，可以一份代码方便根据设备能力，在云端和边缘侧集成。


针对常规视频结构化分析（IVA）领域，使用CNStream开发应用可以带来如下便捷：

* 使用CNStream原始设计目标就是数据流处理，少冗余，高效率是这个框架的特点。

* 内置CNInfer模块，相比使用tensorflow/caffe等深度学习框架，因为强调的是框架算子的完整性及快速验证深度学习模型作为出发点，使用在生产系统中，无法最高效率的利用硬件性能。CNStream的推理模块直接基于寒武纪运行时库（CNRT），快速开发的同时，高效的利用了底层硬件能力。

* 内置的Tracker模块，经过寒武纪芯片加速优化后KCF算法，多路并行比运行在CPU上的Deepsort效率更好。

* 良好的本地化支持团队、持续的迭代开发能力、内建开发者社区提供了快速的客户响应。


CNStream应用框架
-----------------------------
使用CNStream SDK开发一个应用，典型框架如下图：

    .. figure::  ../images/detection_flow.png

       基于CNStream SDK的典型视频结构化场景架构图 
