set(module_name rtsp_sink)
if(NOT cnstream_build_integrated_lib)
  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-deprecated-declarations")
  include_directories(${PROJECT_SOURCE_DIR}/3rdparty/live555/include/BasicUsageEnvironment)
  include_directories(${PROJECT_SOURCE_DIR}/3rdparty/live555/include/groupsock)
  include_directories(${PROJECT_SOURCE_DIR}/3rdparty/live555/include/liveMedia)
  include_directories(${PROJECT_SOURCE_DIR}/3rdparty/live555/include/UsageEnvironment)
  include_directories(${PROJECT_SOURCE_DIR}/apps/modules/${module_name}/include)
  include_directories(${PROJECT_SOURCE_DIR}/apps/modules/${module_name}/src)
  link_directories(${PROJECT_SOURCE_DIR}/3rdparty/live555/lib)
  file(GLOB srcs ${PROJECT_SOURCE_DIR}/apps/modules/${module_name}/src/*.cpp)
  set(libname "app-${module_name}")
  add_library(${libname} SHARED ${srcs})
  target_link_libraries(${libname} cnstream-toolkit cns-core liveMedia UsageEnvironment BasicUsageEnvironment groupsock)
  add_custom_target(live555 sh ${PROJECT_SOURCE_DIR}/tools/build_live555.sh)
  add_dependencies(${libname} live555)
endif()

